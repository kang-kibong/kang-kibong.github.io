<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>[카카오 테크 캠퍼스 2기] 1단계 7주차 WIL - SPA 개발을 위한 컴포넌트 기반 아키텍처 구축하기</title><!-- Begin Jekyll SEO tag v2.7.1 -->
<meta name="generator" content="Jekyll v3.9.5" />
<meta property="og:title" content="[카카오 테크 캠퍼스 2기] 1단계 7주차 WIL - SPA 개발을 위한 컴포넌트 기반 아키텍처 구축하기" />
<meta name="author" content="Kang Byeonghyeon" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Kang Byeonghyeon’s dev blog" />
<meta property="og:description" content="Kang Byeonghyeon’s dev blog" />
<link rel="canonical" href="http://localhost:4000/%EC%B9%B4%EC%B9%B4%EC%98%A4-%ED%85%8C%ED%81%AC-%EC%BA%A0%ED%8D%BC%EC%8A%A4-2%EA%B8%B0-1%EB%8B%A8%EA%B3%84-7%EC%A3%BC%EC%B0%A8-wil-spa-%EA%B0%9C%EB%B0%9C%EC%9D%84-%EC%9C%84%ED%95%9C-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EA%B8%B0%EB%B0%98-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0.html" />
<meta property="og:url" content="http://localhost:4000/%EC%B9%B4%EC%B9%B4%EC%98%A4-%ED%85%8C%ED%81%AC-%EC%BA%A0%ED%8D%BC%EC%8A%A4-2%EA%B8%B0-1%EB%8B%A8%EA%B3%84-7%EC%A3%BC%EC%B0%A8-wil-spa-%EA%B0%9C%EB%B0%9C%EC%9D%84-%EC%9C%84%ED%95%9C-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EA%B8%B0%EB%B0%98-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0.html" />
<meta property="og:site_name" content="Kang Byeong-hyeon 👨🏻‍💻" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-05-28T00:00:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="[카카오 테크 캠퍼스 2기] 1단계 7주차 WIL - SPA 개발을 위한 컴포넌트 기반 아키텍처 구축하기" />
<script type="application/ld+json">
{"dateModified":"2024-05-28T00:00:00+09:00","datePublished":"2024-05-28T00:00:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/%EC%B9%B4%EC%B9%B4%EC%98%A4-%ED%85%8C%ED%81%AC-%EC%BA%A0%ED%8D%BC%EC%8A%A4-2%EA%B8%B0-1%EB%8B%A8%EA%B3%84-7%EC%A3%BC%EC%B0%A8-wil-spa-%EA%B0%9C%EB%B0%9C%EC%9D%84-%EC%9C%84%ED%95%9C-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EA%B8%B0%EB%B0%98-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0.html"},"url":"http://localhost:4000/%EC%B9%B4%EC%B9%B4%EC%98%A4-%ED%85%8C%ED%81%AC-%EC%BA%A0%ED%8D%BC%EC%8A%A4-2%EA%B8%B0-1%EB%8B%A8%EA%B3%84-7%EC%A3%BC%EC%B0%A8-wil-spa-%EA%B0%9C%EB%B0%9C%EC%9D%84-%EC%9C%84%ED%95%9C-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EA%B8%B0%EB%B0%98-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0.html","author":{"@type":"Person","name":"Kang Byeonghyeon"},"@type":"BlogPosting","description":"Kang Byeonghyeon’s dev blog","headline":"[카카오 테크 캠퍼스 2기] 1단계 7주차 WIL - SPA 개발을 위한 컴포넌트 기반 아키텍처 구축하기","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Kang Byeong-hyeon 👨🏻‍💻" /><meta name="title" content="Kang Byeong-hyeon 👨🏻‍💻" />
  <meta name="description" content="Kang Byeong-hyeon's dev blog" />

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://kang-kibong.github.io/" />
  <meta property="og:title" content="Kang Byeong-hyeon 👨🏻‍💻" />
  <meta property="og:description" content="Kang Byeong-hyeon's dev blog" />
  <meta property="og:image" content="logo.png" />

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image" />
  <meta property="twitter:url" content="https://kang-kibong.github.io/" />
  <meta property="twitter:title" content="Kang Byeong-hyeon 👨🏻‍💻" />
  <meta property="twitter:description" content="Kang Byeong-hyeon's dev blog" />
  <meta property="twitter:image" content="logo.png" />

  <link
    rel="shortcut icon"
    type="image/x-icon"
    href="/logo.png"
  />
  <link rel="stylesheet" href="/assets/css/main.css" />
  <script>
    window.addEventListener("scroll", function () {
      const header = document.querySelector(".background-header");
      const scrollY = window.scrollY;
      const positionY = 50 + scrollY * 0.03;
      header.style.backgroundPosition = `center ${positionY}%`;
    });
  </script>
  <script>
    window.addEventListener("scroll", function () {
      const background = document.querySelector(".background");
      const profile1 = document.querySelector(".profile1");
      const profile2 = document.querySelector(".profile2");
      const scrollY = window.scrollY;
      const positionY = 50 + scrollY * 0.03;
      background.style.backgroundPosition = `center ${positionY}%`;
      profile1.style.backgroundPosition = `center ${positionY}%`;
      profile2.style.backgroundPosition = `center ${positionY}%`;
    });
  </script>

  <!-- Google Adsense -->
  <script
    async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8692933662942054"
    crossorigin="anonymous"
  ></script>
</head>
<body a="auto">
    <main class="page-content" aria-label="Content">
      <a href="/" class="background-link">
  <header class="background-header">
    <h1 class="title">Hi, I’m <strong>Kang Byeong-hyeon</strong>.</h1>
  </header>
</a>
<article class="w"><a href="/">..</a><p class="post-meta">
    <time datetime="2024-05-28 00:00:00 +0900"
      >2024-05-28</time
    >
  </p>

  <h1 class="post-title">[카카오 테크 캠퍼스 2기] 1단계 7주차 WIL - SPA 개발을 위한 컴포넌트 기반 아키텍처 구축하기</h1>

  <p><br />
<br />
<br /></p>

<h1 id="1-컴포넌트-생성-클래스">1. 컴포넌트 생성 클래스</h1>

<h2 id="코어-component-클래스-정의">코어 Component 클래스 정의</h2>

<p>먼저, 코어 <strong><code class="language-plaintext highlighter-rouge">Component</code></strong> 클래스를 정의하기 위해 <strong><code class="language-plaintext highlighter-rouge">payload</code></strong> 인수를 받아 <strong><code class="language-plaintext highlighter-rouge">tagName</code></strong>과 같은 속성을 지정하여 동적으로 HTML 요소를 생성할 수 있게 해준다.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">class</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">payload</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">tagName</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">div</span><span class="dl">"</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">payload</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">el</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">tagName</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><strong>생성자</strong>: 생성자는 <strong><code class="language-plaintext highlighter-rouge">payload</code></strong> 객체를 인수로 받아, 구조 분해 할당을 통해 <strong><code class="language-plaintext highlighter-rouge">tagName</code></strong>을 추출하고 기본값은 <strong><code class="language-plaintext highlighter-rouge">'div'</code></strong>로 설정한다.</li>
  <li><strong>요소 생성</strong>: <strong><code class="language-plaintext highlighter-rouge">this.el</code></strong>은 지정된 <strong><code class="language-plaintext highlighter-rouge">tagName</code></strong>을 사용하여 새로 생성된 요소로 설정된다.</li>
  <li><strong>렌더 메서드</strong>: <strong><code class="language-plaintext highlighter-rouge">render</code></strong> 메서드가 호출되고 하위 클래스에서 특정 렌더링 로직을 정의하기 위해 재정의될 수 있도록 설계한다.</li>
</ul>

<h2 id="app-컴포넌트-확장">App 컴포넌트 확장</h2>

<p>코어 <strong><code class="language-plaintext highlighter-rouge">Component</code></strong> 클래스를 확장하여 커스텀 컴포넌트를 만든다.</p>

<p>하위 클래스는 자체 <strong><code class="language-plaintext highlighter-rouge">tagName</code></strong>을 지정하고 커스텀 렌더링 로직을 정의한다.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./core/heropy</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">App</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">({</span> <span class="na">tagName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">h1</span><span class="dl">"</span> <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Hello World!</span><span class="dl">"</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><strong>생성자</strong>: <strong><code class="language-plaintext highlighter-rouge">App</code></strong> 클래스는 <strong><code class="language-plaintext highlighter-rouge">Component</code></strong> 클래스를 확장하고, 생성자는 <strong><code class="language-plaintext highlighter-rouge">super()</code></strong>를 호출하여 <strong><code class="language-plaintext highlighter-rouge">tagName: 'h1'</code></strong>을 지정하는 객체를 전달하여 <strong><code class="language-plaintext highlighter-rouge">&lt;h1&gt;</code></strong> 요소를 생성한다.</li>
  <li><strong>렌더 메서드</strong>: <strong><code class="language-plaintext highlighter-rouge">render</code></strong> 메서드를 재정의하여 요소의 <strong><code class="language-plaintext highlighter-rouge">textContent</code></strong>를 “Hello World!”로 설정한다.</li>
</ul>

<h2 id="전체-코드-통합">전체 코드 통합</h2>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">App</span><span class="p">();</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">app</span><span class="p">.</span><span class="nx">el</span><span class="p">);</span>
</code></pre></div></div>

<ul>
  <li><strong>인스턴스화</strong>: <strong><code class="language-plaintext highlighter-rouge">App</code></strong>의 인스턴스를 생성한다.</li>
  <li><strong>DOM 조작</strong>: “Hello World!” 텍스트가 포함된 <strong><code class="language-plaintext highlighter-rouge">&lt;h1&gt;</code></strong> 요소를 문서의 본문에 추가한다.</li>
</ul>

<p><br />
<br />
<br /></p>

<h1 id="2-선언적-렌더링과-이벤트-핸들링">2. 선언적 렌더링과 이벤트 핸들링</h1>

<p>입력(input) 요소와 버튼(button) 요소를 만들어, 버튼을 클릭하면 입력 값이 콘솔에 출력되는 코드를 작성한다.</p>

<p>이를 위해 선언적 렌더링과 이벤트 핸들링을 구현해본다.</p>

<h2 id="코어-component-state-설정">코어 <strong>Component</strong> state 설정</h2>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">class</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">payload</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">tagName</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">div</span><span class="dl">"</span><span class="p">,</span> <span class="nx">state</span> <span class="o">=</span> <span class="p">{}</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">payload</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">el</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">tagName</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="nx">state</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>먼저, <strong><code class="language-plaintext highlighter-rouge">payload</code></strong> 객체를 받아 <strong><code class="language-plaintext highlighter-rouge">tagName</code></strong>과 <strong><code class="language-plaintext highlighter-rouge">state</code></strong>를 설정한다. <strong><code class="language-plaintext highlighter-rouge">state</code></strong>는 기본값으로 빈 객체 <strong><code class="language-plaintext highlighter-rouge">{}</code></strong>를 갖도록 한다.</p>

<h2 id="app-컴포넌트-확장-1">App 컴포넌트 확장</h2>

<p><strong><code class="language-plaintext highlighter-rouge">input</code></strong> 요소와 <strong><code class="language-plaintext highlighter-rouge">button</code></strong> 요소를 생성하고, 입력 이벤트와 클릭 이벤트를 처리하도록 한다.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./core/heropy</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">App</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">({</span> <span class="na">state</span><span class="p">:</span> <span class="p">{</span> <span class="na">inputText</span><span class="p">:</span> <span class="dl">""</span> <span class="p">}</span> <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="dl">"</span><span class="s2">search</span><span class="dl">"</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">`
      &lt;input /&gt;
      &lt;button&gt;Click!&lt;/button&gt;
    `</span><span class="p">;</span>

    <span class="kd">const</span> <span class="nx">inputEl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">input</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">inputEl</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">input</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">inputText</span> <span class="o">=</span> <span class="nx">inputEl</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">});</span>

    <span class="kd">const</span> <span class="nx">buttonEl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">button</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">buttonEl</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">inputText</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><strong>생성자</strong>: 생성자에서 <strong><code class="language-plaintext highlighter-rouge">state</code></strong>를 <strong><code class="language-plaintext highlighter-rouge">{ inputText: '' }</code></strong>로 초기화한다.</li>
  <li><strong>렌더 메서드</strong>: <strong><code class="language-plaintext highlighter-rouge">render</code></strong> 메서드를 재정의하여 요소를 렌더링하고, 클래스 이름을 추가한다.</li>
  <li><strong>HTML 설정</strong>: <strong><code class="language-plaintext highlighter-rouge">this.el.innerHTML</code></strong>을 통해 <strong><code class="language-plaintext highlighter-rouge">input</code></strong>과 <strong><code class="language-plaintext highlighter-rouge">button</code></strong> 요소를 생성한다.</li>
  <li><strong>이벤트 핸들링</strong>:
    <ul>
      <li><strong><code class="language-plaintext highlighter-rouge">input</code></strong> 요소에 <strong><code class="language-plaintext highlighter-rouge">input</code></strong> 이벤트 리스너를 추가하여 입력 값을 <strong><code class="language-plaintext highlighter-rouge">this.state.inputText</code></strong>에 저장한다.</li>
      <li><strong><code class="language-plaintext highlighter-rouge">button</code></strong> 요소에 <strong><code class="language-plaintext highlighter-rouge">click</code></strong> 이벤트 리스너를 추가하여 현재 <strong><code class="language-plaintext highlighter-rouge">this.state.inputText</code></strong> 값을 콘솔에 출력한다.</li>
    </ul>
  </li>
</ul>

<p><br />
<br />
<br /></p>

<h1 id="3-조건과-반복을-활용한-컴포넌트-렌더링">3. 조건과 반복을 활용한 컴포넌트 렌더링</h1>

<h2 id="app-컴포넌트-확장-2">App 컴포넌트 확장</h2>

<p>상태로 갖는 과일 목록을 가격이 3000 미만인 과일들만 렌더링하도록 한다.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./core/heropy</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">App</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">({</span>
      <span class="na">state</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">fruits</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Apple</span><span class="dl">"</span><span class="p">,</span> <span class="na">price</span><span class="p">:</span> <span class="mi">1000</span> <span class="p">},</span>
          <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Banana</span><span class="dl">"</span><span class="p">,</span> <span class="na">price</span><span class="p">:</span> <span class="mi">2000</span> <span class="p">},</span>
          <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Cherry</span><span class="dl">"</span><span class="p">,</span> <span class="na">price</span><span class="p">:</span> <span class="mi">3000</span> <span class="p">},</span>
        <span class="p">],</span>
      <span class="p">},</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">`
    &lt;h1&gt;Fruits&lt;/h1&gt;
    &lt;ul&gt;
      </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">fruits</span>
        <span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">fruit</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">fruit</span><span class="p">.</span><span class="nx">price</span> <span class="o">&lt;</span> <span class="mi">3000</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">fruit</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="s2">`&lt;li&gt;</span><span class="p">${</span><span class="nx">fruit</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2">&lt;/li&gt;`</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="dl">""</span><span class="p">)}</span><span class="s2">
    &lt;/ul&gt;
    `</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><strong>생성자</strong>: <strong><code class="language-plaintext highlighter-rouge">state</code></strong>에 과일 목록을 설정한다.</li>
  <li><strong>렌더 메서드</strong>: <strong><code class="language-plaintext highlighter-rouge">render</code></strong> 메서드를 재정의하여 과일 목록을 렌더링한다.
    <ul>
      <li><strong>필터링</strong>: <strong><code class="language-plaintext highlighter-rouge">this.state.fruits</code></strong> 배열을 <strong><code class="language-plaintext highlighter-rouge">filter</code></strong> 메서드를 사용하여 가격이 3000 미만인 과일들만 추출한다.</li>
      <li><strong>매핑</strong>: <strong><code class="language-plaintext highlighter-rouge">map</code></strong> 메서드를 사용하여 각 과일 객체를 <strong><code class="language-plaintext highlighter-rouge">&lt;li&gt;</code></strong> 요소로 변환한다.</li>
      <li><strong>문자열 병합</strong>: <strong><code class="language-plaintext highlighter-rouge">join('')</code></strong>을 사용하여 배열을 하나의 문자열로 결합한다.</li>
    </ul>
  </li>
  <li><strong>HTML 설정</strong>: 필터링되고 매핑된 과일 목록을 포함하는 HTML 구조를 <strong><code class="language-plaintext highlighter-rouge">this.el.innerHTML</code></strong>에 설정한다.</li>
</ul>

<p><br />
<br />
<br /></p>

<h1 id="4-자식-컴포넌트에게-데이터-전달">4. 자식 컴포넌트에게 데이터 전달</h1>

<h2 id="코어-component-props-설정">코어 Component props 설정</h2>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">class</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">payload</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">tagName</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">div</span><span class="dl">"</span><span class="p">,</span> <span class="nx">state</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">props</span> <span class="o">=</span> <span class="p">{}</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">payload</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">el</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">tagName</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="nx">state</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">props</span> <span class="o">=</span> <span class="nx">props</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>먼저, <strong><code class="language-plaintext highlighter-rouge">payload</code></strong> 객체를 받아 <strong><code class="language-plaintext highlighter-rouge">props</code></strong>를 설정한다. <strong><code class="language-plaintext highlighter-rouge">props</code></strong>는 기본값으로 빈 객체 <strong><code class="language-plaintext highlighter-rouge">{}</code></strong>를 갖도록 한다.</p>

<h2 id="app-컴포넌트-확장-3">App 컴포넌트 확장</h2>

<p>상태로 갖는 과일 목록을 가지고, 각 과일 항목을 자식 자식 컴포넌트인 <strong><code class="language-plaintext highlighter-rouge">FruitItem</code></strong>에게 전달한다.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./core/heropy</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">FruitItem</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./components/FruitItem</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">App</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">({</span>
      <span class="na">state</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">fruits</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Apple</span><span class="dl">"</span><span class="p">,</span> <span class="na">price</span><span class="p">:</span> <span class="mi">1000</span> <span class="p">},</span>
          <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Banana</span><span class="dl">"</span><span class="p">,</span> <span class="na">price</span><span class="p">:</span> <span class="mi">2000</span> <span class="p">},</span>
          <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Cherry</span><span class="dl">"</span><span class="p">,</span> <span class="na">price</span><span class="p">:</span> <span class="mi">3000</span> <span class="p">},</span>
        <span class="p">],</span>
      <span class="p">},</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">`
    &lt;h1&gt;Fruits&lt;/h1&gt;
    &lt;ul&gt;&lt;/ul&gt;
    `</span><span class="p">;</span>

    <span class="kd">const</span> <span class="nx">ulEl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">ul</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">ulEl</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span>
      <span class="p">...</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">fruits</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span>
        <span class="p">(</span><span class="nx">fruit</span><span class="p">)</span> <span class="o">=&gt;</span>
          <span class="k">new</span> <span class="nx">FruitItem</span><span class="p">({</span>
            <span class="na">props</span><span class="p">:</span> <span class="p">{</span>
              <span class="na">name</span><span class="p">:</span> <span class="nx">fruit</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
              <span class="na">price</span><span class="p">:</span> <span class="nx">fruit</span><span class="p">.</span><span class="nx">price</span><span class="p">,</span>
            <span class="p">},</span>
          <span class="p">}).</span><span class="nx">el</span>
      <span class="p">)</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><strong>자식 컴포넌트 생성</strong>: <strong><code class="language-plaintext highlighter-rouge">this.state.fruits</code></strong> 배열을 순회하며 각 과일 항목에 대해 <strong><code class="language-plaintext highlighter-rouge">FruitItem</code></strong> 인스턴스를 생성하고, 이를 <strong><code class="language-plaintext highlighter-rouge">&lt;ul&gt;</code></strong> 요소에 추가한다.</li>
</ul>

<h2 id="자식-컴포넌트fruititem-구현">자식 컴포넌트(FruitItem) 구현</h2>

<p><strong><code class="language-plaintext highlighter-rouge">FruitItem</code></strong> 컴포넌트는 <strong><code class="language-plaintext highlighter-rouge">Component</code></strong> 클래스를 상속받아 각 과일 항목의 정보를 표시하낟.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">jsx코드</span> <span class="nx">복사</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../core/heropy</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">FruitItem</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">payload</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">({</span> <span class="na">tagName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">li</span><span class="dl">'</span><span class="p">,</span> <span class="na">props</span><span class="p">:</span> <span class="nx">payload</span><span class="p">.</span><span class="nx">props</span> <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">`
      &lt;span&gt;</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2">&lt;/span&gt;
      &lt;span&gt;</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">price</span><span class="p">}</span><span class="s2">&lt;/span&gt;
    `</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">price</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<ul>
  <li><strong>생성자</strong>: <strong><code class="language-plaintext highlighter-rouge">FruitItem</code></strong> 클래스는 <strong><code class="language-plaintext highlighter-rouge">Component</code></strong> 클래스를 상속하며, <strong><code class="language-plaintext highlighter-rouge">tagName</code></strong>을 <strong><code class="language-plaintext highlighter-rouge">'li'</code></strong>로 설정하고 <strong><code class="language-plaintext highlighter-rouge">props</code></strong>를 전달받는다.</li>
  <li><strong>렌더 메서드</strong>: <strong><code class="language-plaintext highlighter-rouge">render</code></strong> 메서드를 재정의하여 과일 이름과 가격을 표시한다.</li>
  <li><strong>이벤트 핸들링</strong>: 각 과일 항목을 클릭하면 해당 과일의 이름과 가격을 콘솔에 출력한다.</li>
</ul>

<p><br />
<br />
<br /></p>

<h1 id="5-해쉬-라우터-관리">5. 해쉬 라우터 관리</h1>

<p>SPA(Single Page Application) 구현을 위해, URL 해쉬를 기반으로 페이지를 라우팅하는 방법이다.</p>

<p>이를 통해 전체 페이지를 다시 로드하지 않고도 URL 변경에 따라 다른 컴포넌트를 렌더링할 수 있다.</p>

<h2 id="routerender-함수"><code class="language-plaintext highlighter-rouge">routeRender</code> 함수</h2>

<p>해쉬 변경 시 적절한 컴포넌트를 찾아 렌더링할 수 있도록 하는 <code class="language-plaintext highlighter-rouge">routeRender</code>함수를 작성한다.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">routeRender</span><span class="p">(</span><span class="nx">routes</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// URL에 해쉬가 없는 경우 기본 해쉬 설정</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">location</span><span class="p">.</span><span class="nx">hash</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">history</span><span class="p">.</span><span class="nx">replaceState</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">"</span><span class="s2">/#/</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kd">const</span> <span class="nx">routerView</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">router-view</span><span class="dl">"</span><span class="p">);</span>

  <span class="c1">// 해쉬와 쿼리 문자열 분리</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">hash</span><span class="p">,</span> <span class="nx">queryString</span> <span class="o">=</span> <span class="dl">""</span><span class="p">]</span> <span class="o">=</span> <span class="nx">location</span><span class="p">.</span><span class="nx">hash</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2">?</span><span class="dl">"</span><span class="p">);</span>

  <span class="c1">// 쿼리 문자열을 객체로 변환</span>
  <span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="nx">queryString</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2">&amp;</span><span class="dl">"</span><span class="p">).</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">acc</span><span class="p">,</span> <span class="nx">cur</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">[</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">]</span> <span class="o">=</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2">=</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">acc</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">acc</span><span class="p">;</span>
  <span class="p">},</span> <span class="p">{});</span>
  <span class="c1">// 쿼리 객체를 히스토리 상태로 설정</span>
  <span class="nx">history</span><span class="p">.</span><span class="nx">replaceState</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="dl">""</span><span class="p">,</span> <span class="dl">""</span><span class="p">);</span>

  <span class="c1">// 현재 해쉬에 맞는 라우트 찾기</span>
  <span class="kd">const</span> <span class="nx">currentRoute</span> <span class="o">=</span> <span class="nx">routes</span><span class="p">.</span><span class="nx">find</span><span class="p">((</span><span class="nx">route</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">route</span><span class="p">.</span><span class="nx">path</span><span class="p">}</span><span class="s2">/?$`</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="nx">hash</span><span class="p">)</span>
  <span class="p">);</span>

  <span class="c1">// router-view 요소 비우고 새 컴포넌트 렌더링</span>
  <span class="nx">routerView</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">``</span><span class="p">;</span>
  <span class="nx">routerView</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="k">new</span> <span class="nx">currentRoute</span><span class="p">.</span><span class="nx">component</span><span class="p">().</span><span class="nx">el</span><span class="p">);</span>

  <span class="c1">// 스크롤을 최상단으로 이동</span>
  <span class="nb">window</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><strong>기본 해쉬 설정</strong>: 페이지가 처음 로드될 때 해쉬가 없으면 기본 해쉬를 <strong><code class="language-plaintext highlighter-rouge">/#/</code></strong>로 설정한다.</li>
  <li><strong>router-view 요소 선택</strong>: 라우터가 컴포넌트를 렌더링할 <strong><code class="language-plaintext highlighter-rouge">router-view</code></strong> 요소를 선택한다.</li>
  <li><strong>해쉬와 쿼리 문자열 분리</strong>: <strong><code class="language-plaintext highlighter-rouge">location.hash</code></strong>를 사용하여 해쉬와 쿼리 문자열을 분리한다.</li>
  <li><strong>쿼리 문자열 파싱</strong>:
    <ul>
      <li>쿼리 문자열을 <strong><code class="language-plaintext highlighter-rouge">&amp;</code></strong>로 분리하고, 각 쿼리 파라미터를 <strong><code class="language-plaintext highlighter-rouge">=</code></strong>로 분리하여 객체 형태로 변환한다.</li>
      <li>이 쿼리 객체를 <strong><code class="language-plaintext highlighter-rouge">history.replaceState</code></strong>를 통해 히스토리 상태로 설정한다.</li>
    </ul>
  </li>
  <li><strong>현재 라우트 찾기:</strong> 라우트 배열에서 현재 해쉬에 맞는 라우트를 정규식을 사용하여 찾는다.</li>
  <li><strong>컴포넌트 렌더링</strong>:
    <ul>
      <li><strong><code class="language-plaintext highlighter-rouge">router-view</code></strong> 요소를 비우고, 현재 라우트에 맞는 컴포넌트를 생성하여 추가한다.</li>
      <li>화면을 최상단으로 스크롤되도록 한다.</li>
    </ul>
  </li>
</ul>

<h2 id="createrouter-함수"><code class="language-plaintext highlighter-rouge">createRouter</code> 함수</h2>

<p>라우터를 초기화하고, 해쉬 변경 시 <strong><code class="language-plaintext highlighter-rouge">routeRender</code></strong> 함수를 호출하도록 이벤트 리스너를 설정한다.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">function</span> <span class="nx">createRouter</span><span class="p">(</span><span class="nx">routes</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">popstate</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">routeRender</span><span class="p">(</span><span class="nx">routes</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="nx">routeRender</span><span class="p">(</span><span class="nx">routes</span><span class="p">);</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><strong>popstate 이벤트 리스너 추가</strong>: 브라우저의 뒤로 가기/앞으로 가기 버튼 클릭 시 <strong><code class="language-plaintext highlighter-rouge">popstate</code></strong> 이벤트가 발생한다. 이 때 <strong><code class="language-plaintext highlighter-rouge">routeRender</code></strong> 함수를 호출하여 현재 상태에 맞는 컴포넌트를 렌더링한다.</li>
  <li><strong>초기 렌더링</strong>: 페이지 로드 시 <strong><code class="language-plaintext highlighter-rouge">routeRender</code></strong> 함수를 호출하여 초기 상태에 맞는 컴포넌트를 렌더링한다.</li>
</ul>

<h2 id="routerender와-createrouter-함수-사용"><code class="language-plaintext highlighter-rouge">routeRender</code>와 <code class="language-plaintext highlighter-rouge">createRouter</code> 함수 사용</h2>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">TheHeader</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./components/TheHeader</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./core/heropy</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">App</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">routerView</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">router-view</span><span class="dl">"</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="k">new</span> <span class="nx">TheHeader</span><span class="p">().</span><span class="nx">el</span><span class="p">,</span> <span class="nx">routerView</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">App</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./App</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">router</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./routes</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">root</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">#root</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">root</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="k">new</span> <span class="nx">App</span><span class="p">().</span><span class="nx">el</span><span class="p">);</span>
<span class="nx">router</span><span class="p">();</span>
</code></pre></div></div>

<p><strong><code class="language-plaintext highlighter-rouge">App</code></strong> 컴포넌트를 루트 요소에 추가하고, 라우터를 초기화하여 페이지 로드 시 라우터가 동작하도록 설정한다.</p>

<h2 id="컴포넌트-예제">컴포넌트 예제</h2>

<p><strong><code class="language-plaintext highlighter-rouge">Home</code></strong>과 <strong><code class="language-plaintext highlighter-rouge">About</code></strong> 컴포넌트를 정의하여 각각의 페이지에서 렌더링되도록 한다.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../core/heropy</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">Home</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">`&lt;h1&gt;Home&lt;/h1&gt;`</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../core/heropy</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">About</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">history</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">`
    &lt;h1&gt;About&lt;/h1&gt;
    &lt;h2&gt;</span><span class="p">${</span><span class="nx">a</span><span class="p">}</span><span class="s2">&lt;/h2&gt;
    &lt;h2&gt;</span><span class="p">${</span><span class="nx">b</span><span class="p">}</span><span class="s2">&lt;/h2&gt;
    &lt;h2&gt;</span><span class="p">${</span><span class="nx">c</span><span class="p">}</span><span class="s2">&lt;/h2&gt;
    `</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><br />
<br />
<br /></p>

<h1 id="6-상태-관리">6. 상태 관리</h1>

<p><strong><code class="language-plaintext highlighter-rouge">Store</code></strong> 클래스를 사용하여 상태를 관리하고, 컴포넌트가 해당 상태를 구독(subscribe)하여 상태 변화에 따라 자동으로 업데이트되도록한다.</p>

<h2 id="코어-store-클래스-정의">코어 Store 클래스 정의</h2>

<p><strong><code class="language-plaintext highlighter-rouge">Store</code></strong> 클래스는 상태(state)를 관리하고, 상태가 변경될 때 이를 구독하여 컴포넌트에 알리는 역할을 한다.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">class</span> <span class="nx">Store</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">observers</span> <span class="o">=</span> <span class="p">{};</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">get</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">state</span><span class="p">[</span><span class="nx">key</span><span class="p">],</span>
        <span class="na">set</span><span class="p">:</span> <span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="nx">state</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">observers</span><span class="p">[</span><span class="nx">key</span><span class="p">])</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">observers</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">observer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">observer</span><span class="p">(</span><span class="nx">val</span><span class="p">));</span>
          <span class="p">}</span>
        <span class="p">},</span>
      <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">subscribe</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">observers</span><span class="p">[</span><span class="nx">key</span><span class="p">]))</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">observers</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="nx">cb</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">observers</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nx">cb</span><span class="p">];</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><strong>상태 초기화</strong>: <strong><code class="language-plaintext highlighter-rouge">constructor</code></strong>는 초기 상태를 받아 이를 <strong><code class="language-plaintext highlighter-rouge">this.state</code></strong>에 저장하고, 각 상태 값에 대해 <strong><code class="language-plaintext highlighter-rouge">getter</code></strong>와 <strong><code class="language-plaintext highlighter-rouge">setter</code></strong>를 정의한다.</li>
  <li><strong>상태 변경 감지</strong>: <strong><code class="language-plaintext highlighter-rouge">setter</code></strong>는 상태가 변경될 때마다 해당 상태를 구독하는 모든 콜백 함수를 호출한다.</li>
  <li><strong>구독 관리</strong>: <strong><code class="language-plaintext highlighter-rouge">subscribe</code></strong> 메서드는 특정 상태 키를 구독하는 콜백 함수를 등록한다.</li>
</ul>

<h2 id="상태를-구독하는-컴포넌트">상태를 구독하는 컴포넌트</h2>

<p><strong><code class="language-plaintext highlighter-rouge">Message</code></strong> 컴포넌트는 <strong><code class="language-plaintext highlighter-rouge">Store</code></strong>의 상태를 구독하고, 상태가 변경될 때마다 자동으로 다시 렌더링된다.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../core/heropy</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">messageStore</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../store/message</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">Message</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">();</span>
    <span class="nx">messageStore</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="dl">"</span><span class="s2">message</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">el</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">`
      &lt;h2&gt;</span><span class="p">${</span><span class="nx">messageStore</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">message</span><span class="p">}</span><span class="s2">&lt;/h2&gt;
    `</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><strong>상태 구독</strong>: <strong><code class="language-plaintext highlighter-rouge">constructor</code></strong>에서 <strong><code class="language-plaintext highlighter-rouge">messageStore</code></strong>의 <strong><code class="language-plaintext highlighter-rouge">message</code></strong> 상태를 구독하여 상태가 변경될 때마다 <strong><code class="language-plaintext highlighter-rouge">render</code></strong> 메서드를 호출한다.</li>
  <li><strong>렌더링</strong>: <strong><code class="language-plaintext highlighter-rouge">render</code></strong> 메서드는 현재 상태 값을 사용하여 컴포넌트의 내용을 업데이트한다.</li>
</ul>

<h2 id="store-인스턴스-생성">Store 인스턴스 생성</h2>

<p><strong><code class="language-plaintext highlighter-rouge">Store</code></strong> 클래스를 이용하여 애플리케이션에서 사용할 상태를 관리하는 <strong><code class="language-plaintext highlighter-rouge">messageStore</code></strong> 인스턴스를 생성합니다.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Store</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../core/heropy</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="k">new</span> <span class="nx">Store</span><span class="p">({</span> <span class="na">message</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Hello~</span><span class="dl">"</span> <span class="p">});</span>
</code></pre></div></div>

<ul>
  <li><strong>초기 상태 설정</strong>: <strong><code class="language-plaintext highlighter-rouge">message</code></strong>라는 초기 상태 값을 설정하여 <strong><code class="language-plaintext highlighter-rouge">messageStore</code></strong> 인스턴스를 생성한다.</li>
</ul>

</article>

    </main>
  </body>
</html>