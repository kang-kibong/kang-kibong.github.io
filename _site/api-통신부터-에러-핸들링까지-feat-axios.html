<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>API í†µì‹ ë¶€í„° ì—ëŸ¬ í•¸ë“¤ë§ê¹Œì§€(feat. Axios)</title><!-- Begin Jekyll SEO tag v2.7.1 -->
<meta name="generator" content="Jekyll v3.9.5" />
<meta property="og:title" content="API í†µì‹ ë¶€í„° ì—ëŸ¬ í•¸ë“¤ë§ê¹Œì§€(feat. Axios)" />
<meta name="author" content="Kang Byeonghyeon" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Kang Byeonghyeonâ€™s dev blog" />
<meta property="og:description" content="Kang Byeonghyeonâ€™s dev blog" />
<link rel="canonical" href="http://localhost:4000/byeonghyeon-kang/api-%ED%86%B5%EC%8B%A0%EB%B6%80%ED%84%B0-%EC%97%90%EB%9F%AC-%ED%95%B8%EB%93%A4%EB%A7%81%EA%B9%8C%EC%A7%80-feat-axios.html" />
<meta property="og:url" content="http://localhost:4000/byeonghyeon-kang/api-%ED%86%B5%EC%8B%A0%EB%B6%80%ED%84%B0-%EC%97%90%EB%9F%AC-%ED%95%B8%EB%93%A4%EB%A7%81%EA%B9%8C%EC%A7%80-feat-axios.html" />
<meta property="og:site_name" content="Kang Byeong-hyeon ğŸ‘¨ğŸ»â€ğŸ’»" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-07-12T00:00:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="API í†µì‹ ë¶€í„° ì—ëŸ¬ í•¸ë“¤ë§ê¹Œì§€(feat. Axios)" />
<script type="application/ld+json">
{"dateModified":"2024-07-12T00:00:00+09:00","datePublished":"2024-07-12T00:00:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/byeonghyeon-kang/api-%ED%86%B5%EC%8B%A0%EB%B6%80%ED%84%B0-%EC%97%90%EB%9F%AC-%ED%95%B8%EB%93%A4%EB%A7%81%EA%B9%8C%EC%A7%80-feat-axios.html"},"url":"http://localhost:4000/byeonghyeon-kang/api-%ED%86%B5%EC%8B%A0%EB%B6%80%ED%84%B0-%EC%97%90%EB%9F%AC-%ED%95%B8%EB%93%A4%EB%A7%81%EA%B9%8C%EC%A7%80-feat-axios.html","author":{"@type":"Person","name":"Kang Byeonghyeon"},"@type":"BlogPosting","description":"Kang Byeonghyeonâ€™s dev blog","headline":"API í†µì‹ ë¶€í„° ì—ëŸ¬ í•¸ë“¤ë§ê¹Œì§€(feat. Axios)","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link type="application/atom+xml" rel="alternate" href="http://localhost:4000/byeonghyeon-kang/feed.xml" title="Kang Byeong-hyeon ğŸ‘¨ğŸ»â€ğŸ’»" /><meta name="title" content="Kang Byeong-hyeon ğŸ‘¨ğŸ»â€ğŸ’»" />
  <meta name="description" content="Kang Byeong-hyeon's dev blog" />

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://kang-kibong.github.io/" />
  <meta property="og:title" content="Kang Byeong-hyeon ğŸ‘¨ğŸ»â€ğŸ’»" />
  <meta property="og:description" content="Kang Byeong-hyeon's dev blog" />
  <meta property="og:image" content="logo.png" />

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image" />
  <meta property="twitter:url" content="https://kang-kibong.github.io/" />
  <meta property="twitter:title" content="Kang Byeong-hyeon ğŸ‘¨ğŸ»â€ğŸ’»" />
  <meta property="twitter:description" content="Kang Byeong-hyeon's dev blog" />
  <meta property="twitter:image" content="logo.png" />

  <link
    rel="shortcut icon"
    type="image/x-icon"
    href="/byeonghyeon-kang/logo.png"
  />
  <link rel="stylesheet" href="/byeonghyeon-kang/assets/css/main.css" />
  <script>
    window.addEventListener("scroll", function () {
      const header = document.querySelector(".background-header");
      const scrollY = window.scrollY;
      const positionY = 50 + (scrollY * 0.03);
      header.style.backgroundPosition = `center ${positionY}%`;
    });
  </script>
</head>
<body a="auto">
    <main class="page-content" aria-label="Content">
      <header class="background-header">
        <h1 class="title">Hi, Iâ€™m <strong>Kang Byeong-hyeon</strong>.</h1>
      </header>
      <div class="w">
        <a href="/byeonghyeon-kang/">..</a><article>
  <p class="post-meta">
    <time datetime="2024-07-12 00:00:00 +0900">2024-07-12</time>
  </p>
  
  <h1>API í†µì‹ ë¶€í„° ì—ëŸ¬ í•¸ë“¤ë§ê¹Œì§€(feat. Axios)</h1>

  <p><br />
<br />
<br /></p>

<h1 id="axiosë€">Axiosë€?</h1>

<p><img src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F13897cab-0dd6-431f-b847-04477372a586%2F79bb25ef-1d76-437c-8bfe-118073e86dba%2Faxios.jpg?id=20f07a9e-0bb5-4c86-be98-44047f27efdf&amp;table=block" width="400px" /></p>

<p><br /></p>

<p><strong>Axios</strong>ëŠ” Node.jsì™€ ë¸Œë¼ìš°ì € ëª¨ë‘ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” <strong>Promise ê¸°ë°˜ì˜ HTTP í´ë¼ì´ì–¸íŠ¸</strong>ì´ë‹¤.</p>

<p>ë™ì¼í•œ ì½”ë“œë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•´ ë¸Œë¼ìš°ì €ì™€ Node.jsì—ì„œ API ìš”ì²­ì„ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ë™í˜•(isomorphic) í´ë¼ì´ì–¸íŠ¸ë¡œ, ì„œë²„ ì‚¬ì´ë“œì—ì„œëŠ” ë„¤ì´í‹°ë¸Œ Node.jsì˜ <code class="language-plaintext highlighter-rouge">http</code> ëª¨ë“ˆì„ ì‚¬ìš©í•˜ê³ , í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” <code class="language-plaintext highlighter-rouge">XMLHttpRequests</code>ë¥¼ ì‚¬ìš©í•œë‹¤.</p>

<h2 id="axios-ì„¤ì¹˜">Axios ì„¤ì¹˜</h2>

<p>ì‚¬ìš©í•˜ëŠ” íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ì— ë”°ë¼ ì„¤ì¹˜í•˜ë©´ëœë‹¤.</p>

<p>ì•„ë˜ì˜ ì„¤ì¹˜ ì˜ˆì‹œëŠ” <code class="language-plaintext highlighter-rouge">npm</code> íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì„¤ì¹˜í•œ ëª…ë ¹ì–´ì´ë‹¤.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install </span>axios
</code></pre></div></div>

<p><br />
<br />
<br /></p>

<h1 id="api-í†µì‹ ì„-ìœ„í•œ-ê´€ë¦¬">API í†µì‹ ì„ ìœ„í•œ ê´€ë¦¬</h1>

<h2 id="oasë€">OASë€?</h2>

<p><strong>OAS</strong>(OpenAPI Specification)ëŠ” RESTful APIì˜ êµ¬ì¡°ì™€ ë™ì‘ ë°©ì‹ì„ ëª…í™•íˆ ë¬¸ì„œí™”í•˜ì—¬, ê°œë°œìë“¤ì´ APIë¥¼ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ” ë„êµ¬ì´ë‹¤.</p>

<p>OASëŠ” JSONì´ë‚˜ YAML í˜•ì‹ìœ¼ë¡œ ì‘ì„±ë˜ê´´, APIì˜ ì¸ì¦ ë°©ë²•, ì—”ë“œí¬ì¸íŠ¸, ìš”ì²­ ë° ì‘ë‹µ ë°ì´í„° ë“±ì„ ëª…ì„¸ì„œì— í¬í•¨í•œë‹¤.</p>

<p>OAS ë¬¸ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ <code class="language-plaintext highlighter-rouge">oas.yaml</code>ë¡œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">openapi</span><span class="pi">:</span> <span class="s">3.0.1</span>
<span class="na">info</span><span class="pi">:</span>
  <span class="na">title</span><span class="pi">:</span> <span class="s1">'</span><span class="s">API'</span>
  <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">API'</span>
  <span class="na">version</span><span class="pi">:</span> <span class="s">1.0.0</span>
<span class="na">paths</span><span class="pi">:</span>
  <span class="na">/api/v1/ranking/products</span><span class="pi">:</span>
    <span class="na">get</span><span class="pi">:</span>
      <span class="na">parameters</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">in</span><span class="pi">:</span> <span class="s">query</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">targetType</span>
          <span class="na">schema</span><span class="pi">:</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
            <span class="na">enum</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">ALL</span><span class="pi">,</span> <span class="nv">FEMALE</span><span class="pi">,</span> <span class="nv">MALE</span><span class="pi">,</span> <span class="nv">TEEN</span><span class="pi">]</span>
            <span class="na">default</span><span class="pi">:</span> <span class="s">ALL</span>
          <span class="na">required</span><span class="pi">:</span> <span class="no">false</span>
          <span class="na">description</span><span class="pi">:</span> <span class="s">ì„ ë¬¼ ë­í‚¹ ëŒ€ìƒì í•„í„°</span>
        <span class="pi">-</span> <span class="na">in</span><span class="pi">:</span> <span class="s">query</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">rankType</span>
          <span class="na">schema</span><span class="pi">:</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
            <span class="na">enum</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">MANY_WISH</span><span class="pi">,</span> <span class="nv">MANY_RECEIVE</span><span class="pi">,</span> <span class="nv">MANY_WISH_RECEIVE</span><span class="pi">]</span>
            <span class="na">default</span><span class="pi">:</span> <span class="s">MANY_WISH_RECEIVE</span>
          <span class="na">required</span><span class="pi">:</span> <span class="no">false</span>
          <span class="na">description</span><span class="pi">:</span> <span class="s">ì„ ë¬¼ ë­í‚¹ ì •ë ¬ í•„í„°</span>
      <span class="na">responses</span><span class="pi">:</span>
        <span class="na">200</span><span class="pi">:</span>
          <span class="na">description</span><span class="pi">:</span> <span class="s">ì„ ë¬¼ ë­í‚¹ ëª©ë¡ì„ ê°€ì ¸ì˜¨ë‹¤.</span>
          <span class="na">content</span><span class="pi">:</span>
            <span class="na">application/json</span><span class="pi">:</span>
              <span class="na">schema</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
                <span class="na">properties</span><span class="pi">:</span>
                  <span class="na">products</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">array</span>
                    <span class="na">items</span><span class="pi">:</span>
                      <span class="na">$ref</span><span class="pi">:</span> <span class="s1">'</span><span class="s">#/components/schemas/ProductData'</span>
                <span class="na">required</span><span class="pi">:</span>
                  <span class="pi">-</span> <span class="s">products</span>
                  <span class="s">...</span>
</code></pre></div></div>

<h2 id="env-íŒŒì¼ë¡œ-base_url-ë¶„ë¦¬">.env íŒŒì¼ë¡œ BASE_URL ë¶„ë¦¬</h2>

<p>í™˜ê²½ë³€ìˆ˜ íŒŒì¼(.env)ì„ ì‚¬ìš©í•´ APIì˜ <code class="language-plaintext highlighter-rouge">BASE_URL</code>ì„ ê´€ë¦¬í•˜ë©´, ì½”ë“œì—ì„œ ì§ì ‘ URLì„ ìˆ˜ì •í•  í•„ìš” ì—†ì´ í™˜ê²½ë³„ë¡œ ë‹¤ë¥¸ URLì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.</p>

<p>ì°¸ê³ ë¡œ, CRA í”„ë¡œì íŠ¸ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ <code class="language-plaintext highlighter-rouge">REACT_APP</code> ì ‘ë‘ì‚¬ë¥¼ ë¶™ì—¬ì•¼ í•œë‹¤.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">REACT_APP_BASE_URL</span><span class="o">=</span>https://kakao-tech-campus-mock-server.vercel.app
</code></pre></div></div>

<h2 id="api-íƒ€ì…-ê´€ë¦¬">API íƒ€ì… ê´€ë¦¬</h2>

<p><code class="language-plaintext highlighter-rouge">oas.yaml</code> íŒŒì¼ì„ í†µí•´ ìš”ì²­ê³¼ ì‘ë‹µì˜ êµ¬ì¡°ë¥¼ íŒŒì•…í•˜ê³ , API ì½œ í•¨ìˆ˜ëŠ” <code class="language-plaintext highlighter-rouge">apis</code> ë””ë ‰í† ë¦¬ì—ì„œ ê´€ë¦¬í•˜ë„ë¡ í•˜ì˜€ë‹¤.</p>

<p>ìš”ì²­ê³¼ ì‘ë‹µì˜ íƒ€ì…ë“¤ì€ <code class="language-plaintext highlighter-rouge">types</code> ë””ë ‰í† ë¦¬ì— ë¯¸ë¦¬ ì •ì˜í•˜ì—¬ ì½”ë“œì˜ ìœ ì§€ë³´ìˆ˜ì„±ì„ ë†’ì¼ ìˆ˜ ìˆë„ë¡ í•˜ì˜€ë‹¤.</p>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">types</span>
<span class="err">â”œâ”€â”€</span> <span class="nx">dataTypes</span><span class="p">.</span><span class="nx">ts</span>
<span class="err">â”œâ”€â”€</span> <span class="nx">requestTypes</span><span class="p">.</span><span class="nx">ts</span>
<span class="err">â””â”€â”€</span> <span class="nx">responseTypes</span><span class="p">.</span><span class="nx">ts</span>
</code></pre></div></div>

<h2 id="ìš”ì²­-ë°-ì‘ë‹µ-íƒ€ì…-ì •ì˜">ìš”ì²­ ë° ì‘ë‹µ íƒ€ì… ì •ì˜</h2>

<p>ìš”ì²­ê³¼ ì‘ë‹µì˜ íƒ€ì…ì„ ë¯¸ë¦¬ ì •ì˜í•˜ì—¬ ì½”ë“œì˜ ì•ˆì •ì„±ê³¼ ì¼ê´€ì„±ì„ ìœ ì§€í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ë‹¤.</p>

<p>í•„ìëŠ” ì¼ë‹¨ <code class="language-plaintext highlighter-rouge">types</code> ë””ë ‰í† ë¦¬ì— <code class="language-plaintext highlighter-rouge">requestTypes.ts</code>, <code class="language-plaintext highlighter-rouge">responseTypes.ts</code>ë¡œ ë¶„ë¦¬í•˜ì—¬ íƒ€ì…ì„ ì •ì˜í•˜ì˜€ë‹¤.</p>

<p>ì¶”í›„ì— í”„ë¡œì íŠ¸ê°€ ì»¤ì§€ê³ , ìš”ì²­í•˜ëŠ” APIì½œë„ ë§ì•„ì§€ë©´ <code class="language-plaintext highlighter-rouge">types</code> íŒŒì¼ë“¤ì„ ê´€ë ¨ íƒ€ì…ë“¤ì„ <code class="language-plaintext highlighter-rouge">apis</code> ë””ë ‰í† ë¦¬ì— ìˆëŠ” APIì½œ ë””ë ‰í† ë¦¬ì— ê°€ê¹ê²Œ ë°°ì¹˜í•˜ì—¬ ìš”ì§€ë³´ìˆ˜ì— ìš©ì´í•  ìˆ˜ ìˆë„ë¡ ê´€ë¦¬í•  ì˜ˆì •ì´ë‹¤.</p>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// types/requestTypes.ts</span>

<span class="k">export</span> <span class="kr">interface</span> <span class="nx">RankingProductsRequest</span> <span class="p">{</span>
  <span class="nl">targetType</span><span class="p">?:</span> <span class="dl">"</span><span class="s2">ALL</span><span class="dl">"</span> <span class="o">|</span> <span class="dl">"</span><span class="s2">FEMALE</span><span class="dl">"</span> <span class="o">|</span> <span class="dl">"</span><span class="s2">MALE</span><span class="dl">"</span> <span class="o">|</span> <span class="dl">"</span><span class="s2">TEEN</span><span class="dl">"</span><span class="p">;</span>
  <span class="nl">rankType</span><span class="p">?:</span> <span class="dl">"</span><span class="s2">MANY_WISH</span><span class="dl">"</span> <span class="o">|</span> <span class="dl">"</span><span class="s2">MANY_RECEIVE</span><span class="dl">"</span> <span class="o">|</span> <span class="dl">"</span><span class="s2">MANY_WISH_RECEIVE</span><span class="dl">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// types/responseTypes.ts</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">ProductData</span><span class="p">,</span> <span class="nx">ThemeData</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./dataTypes</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="kr">interface</span> <span class="nx">RankingProductsResponse</span> <span class="p">{</span>
  <span class="nl">products</span><span class="p">:</span> <span class="nx">ProductData</span><span class="p">[];</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kr">interface</span> <span class="nx">ThemesResponse</span> <span class="p">{</span>
  <span class="nl">themes</span><span class="p">:</span> <span class="nx">ThemeData</span><span class="p">[];</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="api-ì½œ-ê´€ë¦¬">API ì½œ ê´€ë¦¬</h2>

<p>ì •ì˜ëœ íƒ€ì…ë“¤ì„ ê¸°ë°˜ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">apis</code> ë””ë ‰í† ë¦¬ì—ì„œ ê´€ë ¨ API í˜¸ì¶œì„ ê´€ë¦¬í•˜ë„ë¡ í•˜ì˜€ë‹¤.</p>

<p>ìš”ì²­ ê²½ë¡œ ê°™ì€ ê²½ìš° <code class="language-plaintext highlighter-rouge">path.ts</code> íŒŒì¼ì— ìƒìˆ˜ë¡œ ê´€ë¦¬í•˜ì—¬, ë‚˜ì¤‘ì— pathê°€ ë³€ê²½ë˜ì—ˆì„ ê²½ìš° ìœ ì§€ë³´ìˆ˜ë¥¼ ì‰½ê²Œ í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ë‹¤.</p>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">apis</span>
<span class="err">â”œâ”€â”€</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">ts</span>
<span class="err">â””â”€â”€</span> <span class="nx">themes</span>
    <span class="err">â”œâ”€â”€</span> <span class="nx">index</span><span class="p">.</span><span class="nx">ts</span>
    <span class="err">â””â”€â”€</span> <span class="nx">path</span><span class="p">.</span><span class="nx">ts</span>
</code></pre></div></div>

<h2 id="axios-ì¸ìŠ¤í„´ìŠ¤-ì‘ì„±">Axios ì¸ìŠ¤í„´ìŠ¤ ì‘ì„±</h2>

<p>API í˜¸ì¶œ ì‹œ ë§¤ë²ˆ <code class="language-plaintext highlighter-rouge">baseURL</code>ì„ ì‘ì„±í•˜ëŠ” ê²ƒì€ ë¹„íš¨ìœ¨ì ì´ë‹¤.</p>

<p>ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ Axiosì˜ <code class="language-plaintext highlighter-rouge">create</code> ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ ë¯¸ë¦¬ <code class="language-plaintext highlighter-rouge">baseURL</code>ì„ ì§€ì •í•˜ê³ , íƒ€ì„ì•„ì›ƒ ì„¤ì •ì„ ì¶”ê°€í•˜ì—¬ ì‘ë‹µì´ 10ì´ˆ ì´ìƒ ì§€ì—°ë  ê²½ìš° ìš”ì²­ì„ ì·¨ì†Œí•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ë‹¤.</p>

<p>ì´í›„, í•´ë‹¹ <code class="language-plaintext highlighter-rouge">axiosInsntance</code>ë¥¼ API ì½œ í•¨ìˆ˜ì—ì„œ ì‚¬ìš©í•˜ê¸°ë§Œ í•˜ë©´ ëœë‹¤.</p>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">axios</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">axiosInstance</span> <span class="o">=</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
  <span class="na">baseURL</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">REACT_APP_BASE_URL</span><span class="p">,</span>
  <span class="na">timeout</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
<span class="p">});</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">axiosInstance</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="http-statusì—-ë”°ë¥¸-ì—ëŸ¬ë©”ì‹œì§€-ì²˜ë¦¬">Http Statusì— ë”°ë¥¸ ì—ëŸ¬ë©”ì‹œì§€ ì²˜ë¦¬</h2>

<p>Axiosì˜ ì¸í„°ì…‰í„°ë¥¼ ì‚¬ìš©í•´ ì‘ë‹µì„ ì²˜ë¦¬í•˜ê¸° ì „ HTTP ìƒíƒœ ì½”ë“œì— ë”°ë¼ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.</p>

<p>ì—ëŸ¬ ë©”ì‹œì§€ë„ ìƒìˆ˜ë¡œ ê´€ë¦¬í•˜ì—¬ ë‚˜ì¤‘ì— ì—ëŸ¬ë©”ì‹œì§€ê°€ ë³€ê²½ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ìœ ì§€ë³´ìˆ˜ë¥¼ ìš©ì´í•˜ê²Œ í•˜ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì´ ê´€ë¦¬í•˜ì˜€ë‹¤.</p>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">ERROR</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">DATA_FETCH</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì— ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">NO_PRODUCTS</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ë³´ì—¬ì¤„ ìƒí’ˆì´ ì—†ì–´ìš”!</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">NOT_FOUND</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ìš”ì²­í•˜ì‹  í˜ì´ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">SERVER_ERROR</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ì„œë²„ì— ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">UNAUTHORIZED</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ì¸ì¦ë˜ì§€ ì•Šì€ ì‚¬ìš©ìì…ë‹ˆë‹¤. ë¡œê·¸ì¸ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">FORBIDDEN</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">BAD_REQUEST</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ì˜ëª»ëœ ìš”ì²­ì…ë‹ˆë‹¤. ì…ë ¥í•œ ì •ë³´ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">TIMEOUT</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ìš”ì²­ ì‹œê°„ì´ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">CONFLICT</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ë°ì´í„° ì¶©ëŒì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</span><span class="dl">"</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div></div>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// apis/instance.ts</span>

<span class="k">import</span> <span class="nx">axios</span><span class="p">,</span> <span class="p">{</span> <span class="nx">AxiosError</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ERROR</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@utils/constants/message</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">axiosInstance</span> <span class="o">=</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
  <span class="na">baseURL</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">REACT_APP_BASE_URL</span><span class="p">,</span>
  <span class="na">timeout</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">statusMessages</span><span class="p">:</span> <span class="p">{</span> <span class="p">[</span><span class="nx">key</span><span class="p">:</span> <span class="kr">number</span><span class="p">]:</span> <span class="kr">string</span> <span class="p">}</span> <span class="o">=</span> <span class="p">{</span>
  <span class="mi">400</span><span class="p">:</span> <span class="nx">ERROR</span><span class="p">.</span><span class="nx">DATA_FETCH</span><span class="p">,</span>
  <span class="mi">401</span><span class="p">:</span> <span class="nx">ERROR</span><span class="p">.</span><span class="nx">UNAUTHORIZED</span><span class="p">,</span>
  <span class="mi">403</span><span class="p">:</span> <span class="nx">ERROR</span><span class="p">.</span><span class="nx">FORBIDDEN</span><span class="p">,</span>
  <span class="mi">404</span><span class="p">:</span> <span class="nx">ERROR</span><span class="p">.</span><span class="nx">NOT_FOUND</span><span class="p">,</span>
  <span class="mi">408</span><span class="p">:</span> <span class="nx">ERROR</span><span class="p">.</span><span class="nx">TIMEOUT</span><span class="p">,</span>
  <span class="mi">409</span><span class="p">:</span> <span class="nx">ERROR</span><span class="p">.</span><span class="nx">CONFLICT</span><span class="p">,</span>
  <span class="mi">500</span><span class="p">:</span> <span class="nx">ERROR</span><span class="p">.</span><span class="nx">SERVER_ERROR</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">axiosInstance</span><span class="p">.</span><span class="nx">interceptors</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span>
  <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">,</span>
  <span class="p">(</span><span class="nx">e</span><span class="p">:</span> <span class="nx">AxiosError</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">message</span> <span class="o">=</span> <span class="nx">statusMessages</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">];</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="nx">message</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">);</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">axiosInstance</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="api-ê²½ë¡œ-ìƒìˆ˜-ê´€ë¦¬">API ê²½ë¡œ ìƒìˆ˜ ê´€ë¦¬</h2>

<p>APIì˜ ê²½ë¡œ(path)ëŠ” ë³€ê²½ë  ìˆ˜ ìˆëŠ” ì‚¬í•­ì´ë¯€ë¡œ ìƒìˆ˜ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ìœ ì§€ë³´ìˆ˜ì— ì¢‹ë‹¤.</p>

<p>ìš”ì²­ê³¼ ê´€ë ¨í•œ ê²½ë¡œë¥¼ ë¯¸ë¦¬ ìƒìˆ˜ë¡œ ì •ì˜í•˜ì—¬ ì½”ë“œì˜ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ ë†’ì¸ë‹¤.</p>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">API_BASE</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">/api/v1</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">THEME_PATHS</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">THEMES</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">API_BASE</span><span class="p">}</span><span class="s2">/themes`</span><span class="p">,</span>
  <span class="na">THEME_PRODUCT</span><span class="p">:</span> <span class="p">(</span><span class="na">themeKey</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="s2">`</span><span class="p">${</span><span class="nx">API_BASE</span><span class="p">}</span><span class="s2">/themes/</span><span class="p">${</span><span class="nx">themeKey</span><span class="p">}</span><span class="s2">/products`</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="api-í˜¸ì¶œ-í•¨ìˆ˜-ì‘ì„±">API í˜¸ì¶œ í•¨ìˆ˜ ì‘ì„±</h2>

<p>ì •ì˜í•œ ê²½ë¡œì™€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•´ API í˜¸ì¶œ í•¨ìˆ˜ë¥¼ ì‘ì„±í•œë‹¤.</p>

<p>API í˜¸ì¶œ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ <code class="language-plaintext highlighter-rouge">try-catch</code> ë¬¸ì„ ì‚¬ìš©í•˜ì§€ ì•Šì€ ì´ìœ ëŠ”, ê° ì»´í¬ë„ŒíŠ¸ì—ì„œ ì¼ê´€ëœ ë°©ì‹ìœ¼ë¡œ ì˜¤ë¥˜ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•¨ì´ë‹¤.</p>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// apis/themes/index.ts</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">ThemesResponse</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@/types/responseTypes</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">axiosInstance</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../instance</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">THEME_PATHS</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./path</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">getThemes</span> <span class="o">=</span> <span class="k">async</span> <span class="p">():</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">ThemesResponse</span><span class="o">&gt;</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axiosInstance</span><span class="p">.</span><span class="kd">get</span><span class="p">&lt;</span><span class="nc">ThemesResponse</span><span class="p">&gt;</span>(THEME_PATHS.THEMES);
  return res.data;
};

export const getThemesProducts = async (
  params: ThemeProductsRequest
): Promise<span class="p">&lt;</span><span class="nc">ThemeProductsResponse</span><span class="p">&gt;</span> =&gt; <span class="si">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">themeKey</span><span class="p">,</span> <span class="nx">pageToken</span><span class="p">,</span> <span class="nx">maxResults</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">params</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">queryParams</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">pageToken</span><span class="p">,</span> <span class="nx">maxResults</span> <span class="p">};</span>

  <span class="kd">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axiosInstance</span><span class="p">.</span><span class="kd">get</span><span class="p">&lt;</span><span class="nc">ThemeProductsResponse</span><span class="p">&gt;</span>(
    THEME_PATHS.THEME_PRODUCT(themeKey),
    <span class="si">{</span>
      <span class="nx">params</span><span class="p">:</span> <span class="nx">queryParams</span><span class="p">,</span>
    <span class="si">}</span>
  );
  return res.data;
};
</code></pre></div></div>

<p><br />
<br />
<br /></p>

<h1 id="ì—ëŸ¬-í•¸ë“¤ë§í•˜ê¸°">ì—ëŸ¬ í•¸ë“¤ë§í•˜ê¸°</h1>

<p>Error Boundaryì™€ Suspenseë¥¼ í†µí•´ ì„ ì–¸ì ìœ¼ë¡œ ë¹„ë™ê¸° ì—ëŸ¬ í•¸ë“¤ë§ì„ í•  ìˆ˜ ìˆì§€ë§Œ, ì´ ì˜ˆì œì—ì„œëŠ” ë‚˜ì´ë¸Œí•˜ê²Œ <code class="language-plaintext highlighter-rouge">useFetch</code> í›…ì„ êµ¬í˜„í•˜ì—¬ ë¹„ë™ê¸° í†µì‹ ì— ëŒ€í•œ ë°ì´í„° ìƒíƒœ ê´€ë¦¬ì™€ ì—ëŸ¬ í•¸ë“¤ë§ì„ ì§ì ‘ ë‹¤ë¤„ë³¼ ì˜ˆì •ì´ë‹¤.</p>

<h2 id="usefetch-êµ¬í˜„"><code class="language-plaintext highlighter-rouge">useFetch</code> êµ¬í˜„</h2>

<p>API í˜¸ì¶œ ì¤‘ ìš”ì²­ ìƒíƒœì™€ ì—ëŸ¬ ë°œìƒ ì‹œ ê° ì»´í¬ë„ŒíŠ¸ì—ì„œ ì´ë¥¼ ë‹¤ë¥´ê²Œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ <code class="language-plaintext highlighter-rouge">useFetch</code>ë¼ëŠ” ì»¤ìŠ¤í…€ í›…ì„ ì‘ì„±í–ˆë‹¤.</p>

<p>ì´ë¥¼ í†µí•´ ë¹„ë™ê¸° ìš”ì²­ ìƒíƒœì™€ ì—ëŸ¬ ìƒíƒœë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ë‹¤.</p>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useCallback</span><span class="p">,</span> <span class="nx">useMemo</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AxiosError</span><span class="p">,</span> <span class="nx">AxiosRequestConfig</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">;</span>

<span class="kr">interface</span> <span class="nx">FetchState</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="na">isLoading</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">;</span>
  <span class="nl">isError</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">;</span>
  <span class="nl">data</span><span class="p">:</span> <span class="nx">T</span> <span class="o">|</span> <span class="kc">null</span><span class="p">;</span>
  <span class="nl">error</span><span class="p">:</span> <span class="nx">AxiosError</span> <span class="o">|</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">useFetch</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span> <span class="nx">P</span> <span class="o">=</span> <span class="kc">undefined</span><span class="o">&gt;</span><span class="p">(</span>
  <span class="nx">apiCall</span><span class="p">:</span> <span class="p">(</span><span class="nx">params</span><span class="p">?:</span> <span class="nx">P</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="nx">apiParams</span><span class="p">?:</span> <span class="nx">P</span><span class="p">,</span>
  <span class="nx">options</span><span class="p">?:</span> <span class="nx">AxiosRequestConfig</span>
<span class="p">):</span> <span class="nx">FetchState</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">fetchState</span><span class="p">,</span> <span class="nx">setFetchState</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="o">&lt;</span><span class="nx">FetchState</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;&gt;</span><span class="p">({</span>
    <span class="na">isLoading</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">isError</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">error</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="na">data</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="p">});</span>

  <span class="kd">const</span> <span class="nx">memoizedApiCall</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(</span><span class="nx">apiCall</span><span class="p">,</span> <span class="p">[</span><span class="nx">apiCall</span><span class="p">]);</span>
  <span class="kd">const</span> <span class="nx">memoizedParams</span> <span class="o">=</span> <span class="nx">useMemo</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">apiParams</span><span class="p">),</span> <span class="p">[</span><span class="nx">apiParams</span><span class="p">]);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">fetchData</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">setFetchState</span><span class="p">({</span>
        <span class="na">isLoading</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="na">isError</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="na">error</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="p">});</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">memoizedApiCall</span><span class="p">(</span><span class="nx">apiParams</span><span class="p">);</span>
        <span class="nx">setFetchState</span><span class="p">({</span> <span class="na">isLoading</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="na">isError</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="na">error</span><span class="p">:</span> <span class="kc">null</span> <span class="p">});</span>
      <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">axiosError</span> <span class="o">=</span> <span class="nx">error</span> <span class="k">as</span> <span class="nx">AxiosError</span><span class="p">;</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error fetching data: </span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
        <span class="nx">setFetchState</span><span class="p">({</span>
          <span class="na">isLoading</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
          <span class="na">isError</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
          <span class="na">data</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
          <span class="na">error</span><span class="p">:</span> <span class="nx">axiosError</span><span class="p">,</span>
        <span class="p">});</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="nx">fetchData</span><span class="p">();</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">memoizedApiCall</span><span class="p">,</span> <span class="nx">memoizedParams</span><span class="p">]);</span>

  <span class="k">return</span> <span class="nx">fetchState</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ì´ë ‡ê²Œ ì‘ì„±ëœ <code class="language-plaintext highlighter-rouge">useFetch</code> í›…ì„ ì‚¬ìš©í•˜ì—¬ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³ , ì»´í¬ë„ŒíŠ¸ì—ì„œ API ë°ì´í„°ë¥¼ ì†ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">...</span>
<span class="k">import</span> <span class="nx">useFetch</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@hooks/useFetch</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">GRID_GAP</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">GRID_COLUMNS</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">ThemeCategory</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">isLoading</span><span class="p">,</span> <span class="nx">isError</span><span class="p">,</span> <span class="nx">error</span><span class="p">,</span> <span class="nx">data</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useFetch</span><span class="o">&lt;</span><span class="nx">ThemesResponse</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">getThemes</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">ThemeCategoryContainer</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">CenteredContainer</span> <span class="na">maxWidth</span><span class="p">=</span><span class="s">"md"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Grid</span> <span class="na">gap</span><span class="p">=</span><span class="si">{</span><span class="nx">GRID_GAP</span><span class="si">}</span> <span class="na">columns</span><span class="p">=</span><span class="si">{</span><span class="nx">GRID_COLUMNS</span><span class="si">}</span><span class="p">&gt;</span>
          ...
        <span class="p">&lt;/</span><span class="nc">Grid</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nc">CenteredContainer</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">ThemeCategoryContainer</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="statushandler-ì»´í¬ë„ŒíŠ¸ë¥¼-í†µí•œ-spinner-ë°-ì—ëŸ¬-ë©”ì‹œì§€-ë Œë”ë§"><code class="language-plaintext highlighter-rouge">StatusHandler</code> ì»´í¬ë„ŒíŠ¸ë¥¼ í†µí•œ Spinner ë° ì—ëŸ¬ ë©”ì‹œì§€ ë Œë”ë§</h2>

<p><code class="language-plaintext highlighter-rouge">useFetch</code>ë¡œ ë°›ì€ ìƒíƒœì— ë”°ë¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•´ì£¼ëŠ” <code class="language-plaintext highlighter-rouge">StatusHandler</code> ë¼ëŠ” ì»´í¬ë„ŒíŠ¸ë¡œ ê´€ë¦¬í•˜ì˜€ë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">isLoading</code> ìƒíƒœê°€ <code class="language-plaintext highlighter-rouge">true</code>ì´ë©´ <code class="language-plaintext highlighter-rouge">Spinner</code> ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ê³ , ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´ <code class="language-plaintext highlighter-rouge">ErrorMessage</code> ì»´í¬ë„ŒíŠ¸ì— ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•˜ì—¬ ì¶œë ¥í•˜ë„ë¡ í•˜ì˜€ë‹¤.</p>

<p>ì¶”ê°€ë¡œ ë°ì´í„°ê°€ ì—†ì„ ê²½ìš°, <code class="language-plaintext highlighter-rouge">isEmpty</code> ìƒíƒœë¥¼ í†µí•´ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•˜ë„ë¡ êµ¬í˜„í•˜ì˜€ë‹¤.</p>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">ReactNode</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AxiosError</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ERROR</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@utils/constants/message</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">ErrorMessage</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./ErrorMessage</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Spinner</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./Spinner</span><span class="dl">"</span><span class="p">;</span>

<span class="kr">interface</span> <span class="nx">StatusHanlderProps</span> <span class="p">{</span>
  <span class="nl">isLoading</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">;</span>
  <span class="nl">isError</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">;</span>
  <span class="nl">isEmpty</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">;</span>
  <span class="nl">error</span><span class="p">?:</span> <span class="nx">AxiosError</span> <span class="o">|</span> <span class="kc">null</span><span class="p">;</span>
  <span class="nl">children</span><span class="p">:</span> <span class="nx">ReactNode</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">StatusHandler</span><span class="p">({</span>
  <span class="nx">isLoading</span><span class="p">,</span>
  <span class="nx">isError</span><span class="p">,</span>
  <span class="nx">isEmpty</span><span class="p">,</span>
  <span class="nx">error</span><span class="p">,</span>
  <span class="nx">children</span><span class="p">,</span>
<span class="p">}:</span> <span class="nx">StatusHanlderProps</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">isLoading</span><span class="p">)</span> <span class="k">return</span> <span class="p">&lt;</span><span class="nc">Spinner</span> <span class="p">/&gt;;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">isError</span> <span class="o">&amp;&amp;</span> <span class="nx">error</span><span class="p">)</span> <span class="k">return</span> <span class="p">&lt;</span><span class="nc">ErrorMessage</span> <span class="na">message</span><span class="p">=</span><span class="si">{</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="si">}</span> <span class="p">/&gt;;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">isEmpty</span><span class="p">)</span> <span class="k">return</span> <span class="p">&lt;</span><span class="nc">ErrorMessage</span> <span class="na">message</span><span class="p">=</span><span class="si">{</span><span class="nx">ERROR</span><span class="p">.</span><span class="nx">NO_PRODUCTS</span><span class="si">}</span> <span class="p">/&gt;;</span>

  <span class="k">return</span> <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">children</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>í•´ë‹¹ <code class="language-plaintext highlighter-rouge">StatusHandler</code> ì»´í¬ë„ŒíŠ¸ë¥¼ API ë¹„ë™ê¸° í˜¸ì¶œì„ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì— ë°ì´í„° ë Œë”ë§ ì‹œ ë¡œë”©, ì—ëŸ¬, ë°ì´í„° ìƒíƒœì— ë”°ë¼ ì ì ˆí•œ UIë¥¼ ì œê³µí•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.</p>

<div class="language-tsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">ThemeCategory</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">error</span><span class="p">,</span> <span class="nx">isError</span><span class="p">,</span> <span class="nx">isLoading</span> <span class="p">}</span> <span class="o">=</span>
    <span class="nx">useFetch</span><span class="o">&lt;</span><span class="nx">ThemesResponse</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">getThemes</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">isEmpty</span> <span class="o">=</span> <span class="o">!</span><span class="nx">data</span> <span class="o">||</span> <span class="nx">data</span><span class="p">?.</span><span class="nx">themes</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">;</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nc">ThemeCategoryContainer</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">CenteredContainer</span> <span class="na">maxWidth</span><span class="p">=</span><span class="s">"md"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">StatusHandler</span>
          <span class="na">isLoading</span><span class="p">=</span><span class="si">{</span><span class="nx">isLoading</span><span class="si">}</span>
          <span class="na">isError</span><span class="p">=</span><span class="si">{</span><span class="nx">isError</span><span class="si">}</span>
          <span class="na">isEmpty</span><span class="p">=</span><span class="si">{</span><span class="nx">isEmpty</span><span class="si">}</span>
          <span class="na">error</span><span class="p">=</span><span class="si">{</span><span class="nx">error</span><span class="si">}</span>
        <span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nc">Grid</span> <span class="na">gap</span><span class="p">=</span><span class="si">{</span><span class="nx">GRID_GAP</span><span class="si">}</span> <span class="na">columns</span><span class="p">=</span><span class="si">{</span><span class="nx">GRID_COLUMNS</span><span class="si">}</span><span class="p">&gt;</span>
            ...
          <span class="p">&lt;/</span><span class="nc">Grid</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nc">StatusHandler</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nc">CenteredContainer</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">ThemeCategoryContainer</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p><br />
<br />
<br /></p>

<h1 id="ë§ˆì¹˜ë©´ì„œ">ë§ˆì¹˜ë©´ì„œ</h1>

<p>ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” <strong>Axios</strong>ë¥¼ í™œìš©í•´ API í†µì‹ ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê³ , ë°œìƒí•  ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ ì—ëŸ¬ë¥¼ ì–´ë–»ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ”ì§€ ì•Œì•„ë³´ì•˜ë‹¤.</p>

<p>Axiosì˜ ê¸°ë³¸ ì‚¬ìš©ë²•ì„ ìµíˆê³ , ì—ëŸ¬ í•¸ë“¤ë§ì„ ì¤‘ì•™í™”í•˜ë©° API ê²½ë¡œë¥¼ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì„ ë‹¤ë£¨ì–´ë³´ì•˜ë‹¤.</p>

<p>ë˜í•œ, <code class="language-plaintext highlighter-rouge">useFetch</code> í›…ì„ êµ¬í˜„í•´ ë¹„ë™ê¸° API í˜¸ì¶œì— ë”°ë¥¸ ë°ì´í„° ìƒíƒœë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ê³ , <code class="language-plaintext highlighter-rouge">StatusHandler</code> ì»´í¬ë„ŒíŠ¸ë¥¼ í†µí•´ <code class="language-plaintext highlighter-rouge">useFetch</code> í›…ìœ¼ë¡œ ë°›ì€ ìƒíƒœì— ë”°ë¼ ë¡œë”©, ì—ëŸ¬, ë°ì´í„° ìƒíƒœì— ë§ëŠ” ë Œë”ë§ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ë°©ë²•ë„ ì†Œê°œí•´ë“œë ¸ë‹¤.</p>

<p>ë‚˜ì¤‘ì—ëŠ” <strong>React Query</strong>ì™€ <strong>ErrorBoundary</strong>, <strong>Suspense</strong>ë¥¼ í†µí•´ ë”ìš± ê°„í¸í•˜ê²Œ ë¹„ë™ê¸° ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ê³ , íš¨ìœ¨ì ì¸ ë Œë”ë§ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.</p>

<p>ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Axiosë¥¼ í™œìš©í•œ ë‚˜ì´ë¸Œí•œ ì ‘ê·¼ ë°©ì‹ì„ í†µí•´ ê¸°ë³¸ ê°œë…ì„ ì´í•´í•˜ëŠ” ë° ì¤‘ì ì„ ë‘ì–´ë³´ì•˜ë‹¤.</p>

</article>
      </div>
    </main>
  </body>
</html>